name: OBS:Staging (cockpit-agama)

on:
  # runs on pushes targeting the default branch
  push:
    branches:
      - master
      # FIXME: remove this before merging
      - obs_sync
    # FIXME: enable before merging
    # paths:
    #   # run only when a web frontend source is changed
    #   # https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#filter-pattern-cheat-sheet
    #   - web/**

  # allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
  update_staging:
    # do not run in forks
    if: github.repository == 'openSUSE/agama'
    uses: ./.github/workflows/obs-staging-shared.yml
    # pass all secrets
    secrets: inherit
    with:
      install_packages: obs-service-node_modules
      package_name: cockpit-agama

