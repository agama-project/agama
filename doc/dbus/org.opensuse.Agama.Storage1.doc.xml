<!DOCTYPE node PUBLIC "-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd">
<node name="/org/opensuse/Agama/Storage1">
  <node name="iscsi_nodes" />
  <node name="zfcp_controllers" />
  <node name="zfcp_disks" />
  <interface name="org.opensuse.Agama.Storage1">
    <method name="Probe">
    </method>
    <!--
      Sets the storage config.
    -->
    <method name="SetConfig">
      <!--
        E.g.,
        {
          "storage": {
            "drives": [
              {
                "search": "/dev/vda",
                "partitions": [
                  { "generate": "default" }
                ]
              }
            ]
          }
        }
      -->
      <arg name="serialized_config" direction="in" type="s"/>
      <!--
        Whether the proposal was correctly calculated:
          0: success
          1: failure
      -->
      <arg name="result" direction="out" type="u"/>
    </method>
    <!--
      Gets the unsolved storage config.
    -->
    <method name="GetConfig">
      <!--
        E.g.,
        {
          "storage": {
            "drives": [
              {
                "search": "/dev/vda",
                "partitions": [
                  { "generate": "default" }
                ]
              }
            ]
          }
        }
      -->
      <arg name="serialized_config" direction="out" type="s"/>
    </method>
    <!--
      Gets the solved storage config.
    -->
    <method name="GetSolvedConfig">
      <!--
        E.g.,
        {
          "storage": {
            "drives": [
              {
                "search": "/dev/vda",
                "partitions": [
                  {
                    "filesystem": {
                      "path": "/home",
                      "type": "xfs"
                    },
                    "size": {
                      "min": "10 GiB",
                      "max": "10 GiB"
                    }
                  }
                ]
              }
            ]
          }
        }
      -->
      <arg name="serialized_config" direction="out" type="s"/>
    </method>
    <!--
      Gets the storage config model.
    -->
    <method name="GetConfigModel">
      <!--
        E.g.,
        {
          "drives": [
            {
              "name": "/dev/vda",
              "spacePolicy": "keep",
              "partitions": [
                {
                  "mountPath": "/",
                  "filesystem": {
                    "default": true,
                    "type": "xfs"
                  },
                  "size": {
                    "default": true,
                    "min": "10 GiB",
                    "max": "10 GiB"
                  }
                }
              ]
            }
          ]
        }
      -->
      <arg name="serialized_model" direction="out" type="s"/>
    </method>
    <method name="Install">
    </method>
    <method name="Finish">
    </method>
    <!--
      Whether the system is in a deprecated status.

      The system is usually set as deprecated as effect of managing some kind of devices, for
      example, when iSCSI sessions are created or when a zFCP disk is activated.

      A deprecated system means that the probed system could not match with the current system.

      It is expected that clients probe devices again if the system is deprecated.
    -->
    <property type="b" name="DeprecatedSystem" access="read"/>
  </interface>
</node>
