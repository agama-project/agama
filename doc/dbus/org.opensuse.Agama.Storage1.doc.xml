<!DOCTYPE node PUBLIC "-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd">
<node name="/org/opensuse/Agama/Storage1">
  <node name="ISCSI" />
  <interface name="org.opensuse.Agama.Storage1">
    <method name="Probe">
    </method>
    <!--
      Reprobe:
      Probes the system and recalculates the proposal using the current config.
    -->
    <method name="Reprobe">
    </method>
    <!--
      SetConfig:
      @result, Whether the proposal was correctly calculated: 0: success, 1: failure

      Sets the storage config.

        @serialized_config, E.g.,
        <programlisting>
        {
          "storage": {
            "drives": [
              {
                "search": "/dev/vda",
                "partitions": [
                  { "generate": "default" }
                ]
              }
            ]
          }
        }
        </programlisting>
    -->
    <method name="SetConfig">
      <arg name="serialized_config" direction="in" type="s"/>
      <arg name="result" direction="out" type="u"/>
    </method>
    <!--
      ResetConfig:
      @result: Whether the proposal was correctly calculated: 0: success, 1: failure

      Resets the default storage config defined by the selected product.
    -->
    <method name="ResetConfig">
      <arg name="result" direction="out" type="u"/>
    </method>
    <!--
      GetConfig:
      Gets the unsolved storage config.

        @serialized_config, e.g.
        <programlisting>
        {
          "storage": {
            "drives": [
              {
                "search": "/dev/vda",
                "partitions": [
                  { "generate": "default" }
                ]
              }
            ]
          }
        }
        </programlisting>
    -->
    <method name="GetConfig">
      <arg name="serialized_config" direction="out" type="s"/>
    </method>
    <!--
      SetConfigModel:
      @result: Whether the proposal was correctly calculated with the given config model: 0: success, 1: failure

      Sets the storage config model.

        E.g.,
        <programlisting>
        {
          "drives": [
            {
              "name": "/dev/vda",
              "partitions": [
                { "mountPath": "/" }
              ]
            }
          ]
        }
        </programlisting>
    -->
    <method name="SetConfigModel">
      <arg name="serialized_model" direction="in" type="s"/>
      <arg name="result" direction="out" type="u"/>
    </method>
    <!--
      GetConfigModel:
      Gets the storage config model.

        E.g.,
        <programlisting>
        {
          "drives": [
            {
              "name": "/dev/vda",
              "spacePolicy": "keep",
              "partitions": [
                {
                  "mountPath": "/",
                  "filesystem": {
                    "default": true,
                    "type": "xfs"
                  },
                  "size": {
                    "default": true,
                    "min": "10 GiB",
                    "max": "10 GiB"
                  }
                }
              ]
            }
          ]
        }
        </programlisting>
    -->
    <method name="GetConfigModel">
      <arg name="serialized_model" direction="out" type="s"/>
    </method>
    <!--
      SolveConfigModel:
      Solves the given storage config model.

      Input, e.g.
      <programlisting>
        E.g.,
        {
          "drives": [
            {
              "name": "/dev/vda",
              "partitions": [
                {
                  "mountPath": "/"
                }
              ]
            }
          ]
        }
        </programlisting>

        Output, e.g.
        <programlisting>
        {
          "drives": [
            {
              "name": "/dev/vda",
              "spacePolicy": "keep",
              "partitions": [
                {
                  "mountPath": "/",
                  "filesystem": {
                    "default": true,
                    "type": "xfs"
                  },
                  "size": {
                    "default": true,
                    "min": "10 GiB",
                    "max": "10 GiB"
                  }
                }
              ]
            }
          ]
        }
        </programlisting>
    -->
    <method name="SolveConfigModel">
      <arg name="sparse_model" direction="in" type="s"/>
      <arg name="solved_model" direction="out" type="s"/>
    </method>
    <!--
      Install:
    -->
    <method name="Install">
    </method>
    <!--
      Finish:
    -->
    <method name="Finish">
    </method>
    <!--
      DeprecatedSystem:
      Whether the system is in a deprecated status.

      The system is usually set as deprecated as effect of managing some kind of devices, for
      example, when iSCSI sessions are created or when a zFCP disk is activated.

      A deprecated system means that the probed system could not match with the current system.

      It is expected that clients probe devices again if the system is deprecated.
    -->
    <property type="b" name="DeprecatedSystem" access="read"/>
  </interface>
</node>
